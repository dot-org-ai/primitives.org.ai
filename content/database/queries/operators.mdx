---
title: Operators Reference
description: Complete reference for all query operators
---

# Operators Reference

Complete reference for all query operators in ai-database.

## Comparison Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$eq` | Equal (default) | `{ status: 'active' }` or `{ status: { $eq: 'active' } }` |
| `$ne` | Not equal | `{ status: { $ne: 'deleted' } }` |
| `$gt` | Greater than | `{ price: { $gt: 100 } }` |
| `$gte` | Greater than or equal | `{ age: { $gte: 18 } }` |
| `$lt` | Less than | `{ stock: { $lt: 10 } }` |
| `$lte` | Less than or equal | `{ rating: { $lte: 3 } }` |

```typescript
// Comparison examples
await db.Product.find({
  price: { $gt: 50, $lt: 200 },  // range
  stock: { $gte: 1 },            // at least 1
  rating: { $gte: 4 },           // 4+ stars
})
```

## Set Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$in` | Value in array | `{ status: { $in: ['active', 'pending'] } }` |
| `$nin` | Value not in array | `{ role: { $nin: ['banned', 'suspended'] } }` |

```typescript
// Set examples
await db.User.find({
  role: { $in: ['admin', 'moderator'] },
  status: { $nin: ['deleted', 'banned'] },
})
```

## Array Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$contains` | Array includes value | `{ tags: { $contains: 'typescript' } }` |
| `$containsAny` | Array includes any of values | `{ tags: { $containsAny: ['react', 'vue'] } }` |
| `$containsAll` | Array includes all values | `{ skills: { $containsAll: ['js', 'css'] } }` |
| `$size` | Array length | `{ items: { $size: 5 } }` |

```typescript
// Array examples
await db.Post.find({
  tags: { $contains: 'ai' },
  categories: { $containsAll: ['tech', 'tutorial'] },
  authors: { $size: { $gt: 1 } },  // collaborative posts
})
```

## String Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$startsWith` | String starts with | `{ name: { $startsWith: 'Dr.' } }` |
| `$endsWith` | String ends with | `{ email: { $endsWith: '@company.com' } }` |
| `$contains` | String contains | `{ bio: { $contains: 'engineer' } }` |
| `$regex` | Regular expression | `{ slug: { $regex: '^[a-z0-9-]+$' } }` |

```typescript
// String examples
await db.User.find({
  name: { $startsWith: 'Dr.' },
  email: { $endsWith: '@gmail.com' },
  bio: { $contains: 'software' },
})
```

## Existence Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$exists` | Field exists | `{ avatar: { $exists: true } }` |
| `$type` | Field is type | `{ metadata: { $type: 'object' } }` |

```typescript
// Existence examples
await db.User.find({
  avatar: { $exists: true },
  deletedAt: { $exists: false },
  preferences: { $type: 'object' },
})
```

### Type Values

| Type | Description |
|------|-------------|
| `'string'` | Text value |
| `'number'` | Numeric value |
| `'boolean'` | true/false |
| `'object'` | Object/Map |
| `'array'` | Array |
| `'null'` | Null value |

## Logical Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$and` | All conditions true | `{ $and: [{ a: 1 }, { b: 2 }] }` |
| `$or` | Any condition true | `{ $or: [{ status: 'active' }, { featured: true }] }` |
| `$not` | Condition false | `{ $not: { deleted: true } }` |

```typescript
// Logical examples
await db.Post.find({
  $or: [
    { featured: true },
    { $and: [{ rating: { $gte: 4.5 } }, { reviews: { $gte: 100 } }] },
  ],
  $not: { status: 'draft' },
})
```

## Graph Operators

| Operator | Description | Example |
|----------|-------------|---------|
| `$rel` | Filter by relationship | `{ $rel: { type: 'follows', from: {...} } }` |
| `$relCount` | Count relationships | `{ $relCount: { type: 'likes', $gte: 100 } }` |

### $rel Properties

| Property | Description |
|----------|-------------|
| `type` | Relationship type name |
| `from` | Source entity filter |
| `to` | Target entity filter |
| `props` | Relationship properties |

### $relCount Properties

| Property | Description |
|----------|-------------|
| `type` | Relationship type name |
| `from` | Source entity filter |
| `to` | Target entity filter |
| `$self` | Reference current entity |

```typescript
// Graph examples
await db.Post.find({
  $rel: {
    type: 'authored',
    from: { type: 'User', where: { verified: true } },
  },
  $relCount: {
    type: 'likes',
    to: '$self',
    $gte: 50,
  },
})
```

## Combining Operators

All operators can be combined:

```typescript
await db.Product.find({
  // Comparison
  price: { $gte: 10, $lte: 100 },

  // Set
  category: { $in: ['electronics', 'gadgets'] },

  // Array
  tags: { $containsAll: ['sale', 'featured'] },

  // String
  name: { $startsWith: 'Premium' },

  // Existence
  discount: { $exists: true },

  // Logical
  $or: [
    { featured: true },
    { rating: { $gte: 4.5 } },
  ],

  // Graph
  $relCount: { type: 'reviews', to: '$self', $gte: 10 },
})
```

## Nested Fields

Use dot notation with any operator:

```typescript
await db.User.find({
  'profile.location.city': 'San Francisco',
  'settings.theme': { $in: ['dark', 'auto'] },
  'stats.followers': { $gte: 1000 },
})
```
