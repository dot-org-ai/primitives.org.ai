---
title: Create
description: Creating new entities
---

# Create

Create new entities with `db.Type.create()`.

## Basic Usage

```typescript
// Auto-generated ID
const post = await db.Post.create({
  title: 'Hello World',
  content: 'My first post...',
})
// post.$id = 'abc123' (auto-generated)

// Custom ID
const post = await db.Post.create('hello-world', {
  title: 'Hello World',
  content: 'My first post...',
})
// post.$id = 'hello-world'
```

## Return Value

Create returns the full entity with generated fields:

```typescript
const user = await db.User.create({
  name: 'Alice',
  email: 'alice@example.com',
})

// Returns:
{
  $id: 'usr_abc123',
  $type: 'User',
  name: 'Alice',
  email: 'alice@example.com',
  createdAt: Date,
  updatedAt: Date,
}
```

## With Relationships

Create entities with relationships by providing IDs:

```typescript
// Create author first
const author = await db.Author.create({
  name: 'Alice',
})

// Create post with author relationship
const post = await db.Post.create({
  title: 'Hello',
  content: '...',
  author: author.$id,  // relationship by ID
})
```

## AI Generation

When schema fields are descriptive, use `generate` for AI-powered creation:

```typescript
const db = DB({
  Post: {
    title: 'Engaging blog post title',
    content: 'Full markdown article (1500-2500 words)',
    tags: ['3-5 relevant tags'],
  }
})

// AI generates content based on schema descriptions
const post = await db.generate({
  type: 'Post',
  data: { topic: 'TypeScript best practices' },
})
```

## Batch Creation

Create multiple entities efficiently:

```typescript
const posts = await Promise.all([
  db.Post.create({ title: 'Post 1' }),
  db.Post.create({ title: 'Post 2' }),
  db.Post.create({ title: 'Post 3' }),
])
```

Or use forEach with generate:

```typescript
for (const topic of topics) {
  await db.generate({
    type: 'Post',
    data: { topic },
  })
}
```

## Events

Create emits a `{Type}.created` event:

```typescript
await db.Post.create({ title: 'Hello' })
// Emits: Post.created { url, data, timestamp }

// Subscribe to creations
db.events.on('Post.created', async (event) => {
  console.log(`New post: ${event.data.title}`)
})
```

## Artifacts

When you create an entity, embeddings are automatically generated:

```typescript
const post = await db.Post.create({
  title: 'Hello',
  content: 'This is my post content...',
})

// Embedding artifact auto-created
const embedding = await db.artifact.get(post.$id, 'embedding')
// { vectors: Float32Array, model: '...', dimensions: 3072 }
```

## Validation

Invalid data throws errors:

```typescript
// Missing required field
await db.Post.create({ content: '...' })
// Error: Missing required field 'title'

// Wrong type
await db.Post.create({ title: 123 })
// Error: Expected string for 'title', got number
```

## Upsert

Create or update with `upsert`:

```typescript
// Creates if doesn't exist, updates if it does
await db.Post.upsert('hello-world', {
  title: 'Hello World',
  content: 'Updated content...',
})
```
